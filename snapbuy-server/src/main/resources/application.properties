spring.application.name=snapbuy

# Master Database (Tenant Management)
spring.datasource.master.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.datasource.master.jdbc-url=jdbc:sqlserver://${MASTER_DB_HOST:localhost}:${MASTER_DB_PORT:1433};databaseName=${MASTER_DB_NAME:SnapBuyMaster};encrypt=false;trustServerCertificate=true
spring.datasource.master.username=${MASTER_DB_USERNAME:sa}
spring.datasource.master.password=${MASTER_DB_PASSWORD:123456}

# Tenant Database (Default - will be overridden at runtime)
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.datasource.url=jdbc:sqlserver://${DB_HOST:localhost}:${DB_PORT:1433};databaseName=${DB_NAME:SnapBuy};encrypt=false;trustServerCertificate=true
spring.datasource.username=${DB_USERNAME:sa}
spring.datasource.password=${DB_PASSWORD:123456}

# Must specify dialect explicitly for multi-tenancy (no default datasource at startup)
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Ho_Chi_Minh

# Disable open-in-view to avoid lazy loading issues
spring.jpa.open-in-view=false

# Disable JDBC metadata access for multi-tenancy performance
spring.jpa.properties.hibernate.boot.allow_jdbc_metadata_access=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Completely disable Spring Boot auto Flyway (we use custom configs)
spring.flyway.enabled=false
spring.flyway.baseline-on-migrate=false

# Separate Flyway for Master DB
master.flyway.enabled=true
master.flyway.locations=classpath:db/migration-master
master.flyway.baseline-on-migrate=true

# Separate Flyway for Tenant DB
tenant.flyway.enabled=true
tenant.flyway.locations=classpath:db/migration
tenant.flyway.baseline-on-migrate=true

spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:huynxhe171343@fpt.edu.vn}
spring.mail.password=${MAIL_PASSWORD:txie qclc thnc mdue}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

upload.dir=${UPLOAD_DIR:uploads}

spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2KB


momo.target=${MOMO_TARGET:dev}
momo.dev.endpoint=https://test-payment.momo.vn/v2/gateway/api
momo.dev.accessKey=${MOMO_DEV_ACCESS_KEY:mTCKt9W3eU1m39TW}
momo.dev.partnerCode=${MOMO_DEV_PARTNER_CODE:MOMOLRJZ20181206}
momo.dev.secretKey=${MOMO_DEV_SECRET_KEY:SetA5RDnLHvt51AULf51DyauxUo3kDU6}

momo.prod.endpoint=https://payment.momo.vn/v2/gateway/api
momo.prod.accessKey=${MOMO_PROD_ACCESS_KEY:KEY}
momo.prod.partnerCode=${MOMO_PROD_PARTNER_CODE:KEY}
momo.prod.secretKey=${MOMO_PROD_SECRET_KEY:KEY}

momo.createUrl=/create
momo.queryUrl=/query
momo.refundUrl=/refund
momo.confirmUrl=/confirm
momo.tokenPayUrl=/tokenization/pay
momo.tokenBindUrl=/tokenization/bind

# Base URL for callbacks - use environment variable for production
app.base.url=${APP_BASE_URL:http://localhost:8080}
# Frontend URL for redirects - defaults to port 5173 for local Vite dev, set to appropriate URL in production
frontend.base.url=${FRONTEND_BASE_URL:http://localhost:5173}
momo.tokenInquiryUrl=/tokenization/cbQuery
momo.tokenDeleteUrl=/tokenization/delete
# JWT Token Expiration: 60000ms = 1p
jwt.expiration.ms=${JWT_EXPIRATION_MS:2592000000}

# Logging Configuration - Reduce verbosity
logging.level.root=WARN
logging.level.com.g127.snapbuy=INFO
logging.level.com.g127.snapbuy.tenant=INFO
logging.level.org.springframework=WARN
logging.level.org.springframework.boot=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.orm.deprecation=ERROR
logging.level.org.flywaydb=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.apache.catalina=WARN
logging.level.org.apache.tomcat=WARN
# Show banner on startup
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
